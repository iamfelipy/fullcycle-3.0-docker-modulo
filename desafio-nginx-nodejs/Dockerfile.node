FROM node:18

WORKDIR /usr/src/app

# Install wget and netcat-openbsd
RUN apt-get update && apt-get install -y wget netcat-openbsd

# Download and install wait-for v2.2.3 from eficode/wait-for repository
RUN wget -qO- https://raw.githubusercontent.com/eficode/wait-for/v2.2.3/wait-for > /usr/local/bin/wait-for \
    && chmod +x /usr/local/bin/wait-for

# Copy package.json and package-lock.json from app directory
COPY app/package*.json ./

RUN npm install

EXPOSE 3000
